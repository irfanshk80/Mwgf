<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>################################ mawgif_claim Views ################################################
	<record id="mawgif_claim_form_view" model="ir.ui.view">
			<field name="name">mawgif_claim.form.view</field>
			<field name="model">maw.claim</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string=" Details" create="false">
					<header>
						<button name="action_confirm" type="object" string="Confirm"
							states="new" groups="mawgif_support.group_call_center" class="oe_highlight" />

						<button name="action_assign" type="object" string="Assign" attrs="{'invisible':['|',('claimcateg', '!=', 'claim'),('state','!=','opened')]}" 
							 groups="mawgif_support.group_call_center" class="oe_highlight" />

						<button name="action_re_assign" type="object" string="Reassign"
							states="solved" groups="mawgif_support.group_call_center" class="oe_highlight" />

						<button name="action_solve" type="object" string="Solve"
							states="assigned" groups="mawgif_support.group_customer_service"
							class="oe_highlight" />

						<button name="action_close" type="object" string="Close"
							states="opened,solved" groups="mawgif_support.group_call_center" class="oe_highlight" />
							
<!-- 						<button name="send_delay_notifications" type="object" string="Run Scheduler"
							class="oe_highlight" /> -->

						<field name="state" widget="statusbar" statusbar_visible="opened,closed"/>
					</header>
					<sheet string="Claims">
						<group>
							<group>
								<field name="number" attrs="{'invisible':[('claimcateg', '!=', 'claim')]}" readonly="1"/>
								<field name="name" invisible="True" />
							</group>
						</group>
						<group string="Customer Info">
							<group>
								<field name="customer_first_name"  attrs="{'readonly':[('state', '=', 'closed')]}"/>
							</group>
							<group>
								<field name="customer_second_name" attrs="{'readonly':[('state', '=', 'closed')]}"/>
							</group>
						</group>
						<group string="Contact Info">
							<group>
								<label for="mobile" string="Mobile" />
								<div class="address_format">
									<field name="country_key" nolabel="1" placeholder="Country" required="1" 
										options='{"no_open": True, "no_create": True}' style="width: 40%%" attrs="{'readonly':[('state', '=', 'closed')]}"/>
									<field name="mobile" nolabel="1"
										placeholder="without leading zero" style="width: 60%%" attrs="{'readonly':[('state', '=', 'closed')]}"/>
								</div>
							</group>

							<group groups="base.group_user">
								<label for="customer_email" string="Email" />
								<div class="address_format">
									<field name="customer_email"  attrs="{'readonly':[('state', '=', 'closed')]}" />
									<button name="action_contact_customer" type="object"
								string="Email Customer" class="oe_highlight" groups="mawgif_support.group_call_center,mawgif_support.group_customer_service"/>
								</div>
							</group>
						</group>

						<group string="Other Info">
							<group>
								<field name="date"  attrs="{'readonly':[('state', '=', 'closed')]}"/>
								<field name="creator_type" readonly="1"/>
								<field name="created_by" readonly="1"/>
							</group>
							<group>
								<field name="city_id" required="1"  attrs="{'readonly':[('state', '=', 'closed')]}" on_change="onchange_city(city_id)" options='{"no_open": True, "no_create": True}'/>
								<field name="location" attrs="{'readonly':[('state', '=', 'closed')]}" />
								<field name="district" on_change="onchange_district(district)"  attrs="{'readonly':[('state', '=', 'closed')]}" domain="[('city_id', '=', city_id)]" context="{'default_city_id':city_id}" options='{"no_open": True, "no_create": True}'/>
							</group>

							<group>
								<field name="attachment" filename="attachment_fname" colspan="4"  attrs="{'readonly':[('state', '=', 'closed')]}"/>
                            	<field name="attachment_fname" invisible="1" />
							</group>
							<group>
								<field name="attachment2" filename="attachment2_fname" colspan="4"  attrs="{'readonly':[('state', '=', 'closed')]}"/>
								<field name="attachment2_fname" invisible="1" />
							</group>
						</group>

						<notebook colspan="4">
							<page string="Support Details">
								<group>
									<field name="claimcateg" attrs="{'readonly':[('state', 'not in', ('new','opened'))]}" required="1"/>
									<field name="complaint_type"
										attrs="{'invisible':[('claimcateg', '!=', 'claim')],'readonly':[('state', '!=', 'new')]}" widget="selection" />
									<field name="description" colspan="4"  attrs="{'readonly':[('state', '=', 'closed')]}" string="Customer Concerns" required="1"/>
									<field name="user_id" attrs="{'invisible':[('claimcateg', '!=', 'claim')],'readonly':[('state', 'not in', ('new','opened','solved'))]}" 
									options='{"no_open": True, "no_create": True}' domain="[('cso','=', True),('district_ids', '=', district)]"/>
								</group>

								<group>
									<field name="service_emp_comment" colspan="4" attrs="{'readonly':[('state', '=', 'closed')]}"/>
								</group>

							</page>
							<page string="Extra Info">
								<group>
									<group string="Dates" >
										<field name="create_date_n" readonly="1"/>
										<field name="date_closed" readonly="1"/>
										<field name="write_date" readonly="1"/>
										<field name="assigned_date" readonly="1"/>
										<field name="solved_date" readonly="1"/>
										<field name="first_assigned_date" readonly="1"/>
									</group>
									<group >
										<field name="source_type" invisible="1" />
										<field name="partner_id" invisible="1" />
									</group>
								</group>

							</page>
						</notebook>
					</sheet>
					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers" />
						<field name="message_ids" widget="mail_thread" />
					</div>
				</form>
			</field>
		</record>
		
		<record id="view_customer_support_form_remove_create_delete" model="ir.ui.view">
        <field name="name">view.customer.support.form.remove.create.delete</field>
        <field name="model">maw.claim</field>
        <field name="inherit_id" ref="mawgif_support.mawgif_claim_form_view"/>
        <field name="groups_id" eval="[(6, 0, [ref('mawgif_support.group_manager'),ref('mawgif_support.group_operation_manager'),
        								ref('mawgif_support.group_customer_service'),ref('mawgif_support.group_call_center')])]"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="attributes">
                <attribute name="create">false</attribute>
                <attribute name="delete">false</attribute>
            </xpath>
        </field>
    	</record>
    	
    	<record id="view_customer_support_tree_remove_create_delete" model="ir.ui.view">
        <field name="name">view.customer.support.tree.remove.create.delete</field>
        <field name="model">maw.claim</field>
        <field name="inherit_id" ref="mawgif_support.mawgif_claim_tree_view"/>
         <field name="groups_id" eval="[(6, 0, [ref('mawgif_support.group_manager'),ref('mawgif_support.group_operation_manager'),
        								ref('mawgif_support.group_customer_service'),ref('mawgif_support.group_call_center')])]"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="attributes">
                <attribute name="create">false</attribute>
                 <attribute name="delete">false</attribute>
            </xpath>
        </field>
    	</record>
    	
    	<record id="view_customer_support_form_remove_edit" model="ir.ui.view">
        <field name="name">view.customer.support.form.remove.edit</field>
        <field name="model">maw.claim</field>
        <field name="inherit_id" ref="mawgif_support.mawgif_claim_form_view"/>
         <field name="groups_id" eval="[(6, 0, [ref('mawgif_support.group_manager'),ref('mawgif_support.group_operation_manager')])]"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="attributes">
                <attribute name="edit">false</attribute>
            </xpath>
        </field>
    	</record>


		<!-- Maw claim Search view -->
		<record id="view_crm_case_claims_filter" model="ir.ui.view">
			<field name="name">CRM - Claims Search</field>
			<field name="model">maw.claim</field>
			<field name="arch" type="xml">
				<search string="Search Claims">
					<field name="description" string="Customer Concern" />
					<field name="number" string="Ticket #" />
					<field name="customer_first_name" string="Customer First Name" />
					<field name="mobile" string="Mobile" />
					<field name="customer_email" string="Email" />
					<separator />
					<filter string="Unassigned" icon="terp-personal-"
						domain="[('user_id','=', False)]" help="Unassigned" />

					<filter string="Progress" name="progress" icon="terp-personal-"
						domain="[('state','in', ('new','opened','assigned','solved'))]" help="progress"/>

					<filter string="Closed" icon="terp-personal-"
						domain="[('state','=', 'closed')]" help="Closed"/>

					<field name="user_id" />
					<group expand="0" string="Group By">
						<filter string="Support Type" icon="terp-personal" domain="[]"
							help="Support Type" context="{'group_by':'claimcateg'}" />
						<filter string="Creator Type" icon="terp-personal" domain="[]"
							help="Creator Type" context="{'group_by':'creator_type'}" />
						<filter string="Status" icon="terp-personal" domain="[]"
							help="Status" context="{'group_by':'state'}" />
						<filter string="Assigned To" icon="terp-personal" domain="[]"
							help="Responsible User" context="{'group_by':'user_id'}" />
						<filter string="City" icon="terp-personal" domain="[]"
							help="City" context="{'group_by':'city_id'}" />
						<filter string="Operations" icon="terp-personal" domain="[]"
							help="City" context="{'group_by':'district'}" />
						<filter string="Occurance Date" icon="terp-go-month" domain="[]"
							help="By Month" context="{'group_by':'date'}" />
						<filter string="Creation Date" icon="terp-go-month" domain="[]"
							help="By Month" context="{'group_by':'create_date_n'}" />
						<filter string="Closed Date" icon="terp-go-month" domain="[]"
							help="Date Closed" context="{'group_by':'date_closed'}" />
						<filter string="Source" icon="terp-go-month" domain="[]"
							help="Source" context="{'group_by':'source_type'}" />
					</group>
				</search>
			</field>
		</record>

		<record id="mawgif_claim_tree_view" model="ir.ui.view">
			<field name="name">mawgif_claim.tree.view</field>
			<field name="model">maw.claim</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string=" Details" >
					<field name="customer_first_name" string="Customer First Name" />
					<field name="mobile" />
					<field name="city_id" string="City"/>
					<field name="district" />
					<field name="date" string="Occurance Date"/>
					<field name="create_date_n" />
					<field name="first_assigned_date" invisible="1"/>
					<field name="assigned_date" string="Reassigned Date" invisible="1"/>
					<field name="solved_date" />
					<field name="date_closed" invisible="1"/>
					<field name="number" />
					<field name="creator_type" />
					<field name="claimcateg" />
					<field name="state" />
					<field name="source_type" invisible="1" />
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="maw_claim_graph_view">
			<field name="name">maw.claim.graph</field>
			<field name="model">maw.claim</field>
			<field name="arch" type="xml">
				<graph string="xyz">
					<field name="state" />
					<field name="claimcateg" />
				</graph>
			</field>
		</record>

		################################ course window action ################################################

		<record id="mawgif_claim_win_act" model="ir.actions.act_window">
			<field name="name">Support Ticket</field>
			<field name="res_model">maw.claim</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		################################ menuitem course ################################################

		<menuitem action="mawgif_claim_win_act" id="mawgif_claim_side_active_mi"
			name="Support Ticket" sequence="444" parent="basic_information_file_side_mi" 
			groups="mawgif_support.group_manager,mawgif_support.group_operation_manager,mawgif_support.group_customer_service,mawgif_support.group_call_center"/>


	</data>
</openerp>	












